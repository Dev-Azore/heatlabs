(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358,910],{754:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(5155),l=a(2115),n=a(6910);function i(){let[e,s]=(0,l.useState)([]),[a,i]=(0,l.useState)(""),[r,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[u,m]=(0,l.useState)(null),[p,x]=(0,l.useState)(!1);async function b(){let{data:e}=await n.supabase.from("posts").select("*").order("created_at");s(e||[])}async function h(){x(!0);let e=null;if(u){let s="".concat(Date.now(),"_").concat(u.name),{error:a}=await n.supabase.storage.from("posts").upload(s,u);if(a){alert(a.message),x(!1);return}e="posts/".concat(s)}let{error:s}=await n.supabase.from("posts").insert([{title:a,excerpt:r,content:o,cover_image:e}]);s?alert(s.message):(i(""),c(""),d(""),m(null),b()),x(!1)}async function f(e){if(!confirm("Delete post?"))return;let{error:s}=await n.supabase.from("posts").delete().eq("id",e);s?alert(s.message):b()}return(0,l.useEffect)(()=>{b()},[]),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Posts"}),(0,t.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,t.jsx)("input",{placeholder:"Title",value:a,onChange:e=>i(e.target.value),className:"p-2 bg-slate-800 rounded w-full"}),(0,t.jsx)("input",{placeholder:"Excerpt",value:r,onChange:e=>c(e.target.value),className:"p-2 bg-slate-800 rounded w-full"}),(0,t.jsx)("textarea",{placeholder:"Content",value:o,onChange:e=>d(e.target.value),className:"p-2 bg-slate-800 rounded w-full"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Cover image (optional)"}),(0,t.jsx)("input",{type:"file",onChange:e=>m(e.target.files?e.target.files[0]:null)})]}),(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-amber-500 rounded",disabled:p,children:"Create Post"})]}),(0,t.jsx)("div",{className:"grid gap-3",children:e.map(e=>(0,t.jsxs)("div",{className:"p-3 bg-slate-800 rounded flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.title}),(0,t.jsx)("div",{className:"text-sm text-slate-400",children:e.excerpt})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:()=>f(e.id),className:"px-3 py-1 bg-red-600 rounded",children:"Delete"})})]},e.id))})]})}},6616:(e,s,a)=>{Promise.resolve().then(a.bind(a,754))},6910:(e,s,a)=>{"use strict";a.d(s,{supabase:()=>i});var t=a(945);let l="https://knjhqjygkplullnsqmdk.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtuamhxanlna3BsdWxsbnNxbWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NDA1NTgsImV4cCI6MjA3MDUxNjU1OH0.VI-XbbWnxW5GMqhsoaUTGidGJ2nR9xa-DkFujvmxNLE";if(!l||!n)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,t.UU)(l,n)}},e=>{e.O(0,[945,441,493,977],()=>e(e.s=6616)),_N_E=e.O()}]);